@import 'jquery/datetime/picker';
@import 'jquery/datetime/picker.date';
@import 'jquery/datetime/picker.time';
@import 'leaflet/l.control.locate';
@import 'compass/css3/box-shadow';
@import 'compass/css3/border-radius';
@import 'compass/css3/text-shadow';
@import 'compass/css3/images';
@import 'leaflet/main';
@import 'foundation/components/grid';
@import 'foundation/components/buttons';
@import 'foundation/components/split-buttons';

$event-banner-bg:      #222;
$event-banner-fg:      #fff;
$event-banner-height:  rem-calc(60px);
$event-ticket-height:  $event-banner-height * 1.5;

body.events {
  section.main { 
    @include grid-row;
    padding: rem-calc(32px) 0rem;
  }

  &.show {
    header#event_banner {
      @include grid-row;
      @include box-shadow(0px rem-calc(5px) rem-calc(8px) #aaa); 
      margin-bottom: rem-calc(10px);

      > #event_banner_topheavy {
        @include grid-column($columns: 12, $collapse: true, $float: false);
        @include box-shadow(0px 5px 5px #222); 
        background: $event-banner-bg;
        color: $event-banner-fg;
        height: $event-banner-height;

        #event_banner_date {
          position: sticky;
          width: rem-calc(80px);
          > .day {
            border-top: rem-calc(1px) solid $event-banner-bg;
          }
          > .month {
            line-height: rem-calc(16px);
            height: rem-calc(32px);
          }
        }

        > ul {
          list-style: none;
          display: inline-block;
          height: $event-banner-height;
          margin: 0em; padding: 0em;
          width: 100%;

          > li {
            display: inline-block;
            float: left;

            &.text {
              line-height: $event-banner-height;
              height: $event-banner-height;
              text-align: center;
              padding: 0em rem-calc(10px);

              &:not([data-always]) {
                @extend .hide-for-small;
              }
            }

            &.social {
              float: right;
              padding-right: rem-calc(6px);

              ul.button-group {
                float: right;
                display: inline-block;

                > li {
                  line-height: $event-banner-height;
                }
              }

              a.button {
                padding: 0em rem-calc(12px);
                line-height: $event-banner-height * 2/3;
                height: $event-banner-height * 2/3;
                margin: 0em;
                border-color: transparent;
              }
            }
          }
        }
      }

      > #event_banner_content {
        background: $event-banner-bg center center url(http://flickholdr.com/1600/1000);
        height: $event-banner-height * 7;
        text-align: center;

        > h2 {
          @include background(
          radial-gradient(
          rgba(#fff, 0.8), transparent ($event-banner-height * 6)
          )
          );
          @include text-shadow(0px 0px 6px #000);
          padding: rem-calc(2px) rem-calc(8px) 0rem rem-calc(8px);
          margin: 0em;
          height: ($event-banner-height * 7);
          color: #fff;
          text-align: center;
          display: table-cell;
          vertical-align: middle;
        }
      }
    }

    section#event_navigation {
      text-align: center;
      > dl {
        @include sub-nav;
        text-align: center;
        > dd, > dt { float: none; }

        dd.active {
          i.fa-inverse { color: $primary-color; }
        }
      }
    }

    section.event_panel {
      @include grid-row;
      min-height: $event-banner-height * 5;
      margin: rem-calc(8px) auto;

      &#tickets {
        > ul.ticket-list {
          margin: 0rem; padding: 0rem;

          > li.ticket {
            @include grid-row;
            display: block;
            list-style: none;
            height: $event-ticket-height;
            clear: both;
            margin: rem-calc(8px) auto;
            overflow: hidden;

            > .numerical-box {
              @include grid-column($columns: 3, $collapse: false);

              > b.price, > time {
                display: block;
                text-align: center;
              }

              > b.price {
                height: $event-ticket-height * 3/4;
                line-height: $event-ticket-height * 3/4;
                font-size: 350%;
                background: darken($success-color, 25%);
                color: #fff;
              }

              > time {
                height: $event-ticket-height / 4;
                line-height: $event-ticket-height / 4;
                font-size: 75%;
                background: lighten($success-color, 10%);
                color: #ffffff;
              }
            }

            > .contextual-box {
              @include grid-column($columns: 6, $collapse: false);

              > h2 {
                margin: 0rem;
                padding: 0rem;
                font-size: rem-calc(24px);
                line-height: rem-calc(24px);
              }

              > div {
                font-size: rem-calc(14px);
              }
            }

            > .actions-box {
              @include grid-column($columns: 3, $collapse: false);
              height: $event-ticket-height;
              line-height: $event-ticket-height;
              text-align: center;

              i.fa {
                @include transition(0.2s text-indent, 0.2s opacity);
                text-indent: -100px;
                overflow: hidden;
                opacity: 0;
              }

              a {
                @include single-transition;
                @include button($padding: rem-calc(10px), $bg: $success-color, $full-width: true);
                line-height: $event-ticket-height;
                height: $event-ticket-height;

                &:hover {
                  @include border-radius(rem-calc(6px));
                  font-weight: 900;
                  text-transform: uppercase;
                  opacity: 1;
                  > i.fa { text-indent: 0px; margin-right: 0px; }
                }
              }
            }
          }
        }
      }
    }
  }

  &.new, &.create, &.edit, &.update {
    [data-magellan-expedition=fixed] {
      text-align: center;
      &.fixed { left: 0px; }
    }

    #panel_classification {
      .columns label { text-align: center; }
      .columns:last-child {
        float: left;
      }
    }

    #event_map {
      @include box-shadow(0px 0px 10px #8f939a);
      background-color: #8f939a;
      width: 100%;
      height: 100%;
      min-width: rem-calc(300px);
      min-height: rem-calc(170px);
    }
  }
}

$timebox-day-bg: #fff;
$timebox-day-fg: #333;
$timebox-month-bg: #cc333f;
$timebox-month-fg: #fff;
$timebox-width: rem-calc(96px);

time.date_box {
  width: $timebox-width;
  max-width: $timebox-width;
  text-align: center;

  span.day, span.month { 
    display: block;
    width: $timebox-width;
    border: 1px solid lighten($timebox-day-fg, 50%);
  }

  span.day {
    font-size: 350%;
    background-color: $timebox-day-bg;
    color: $timebox-day-fg;
    border-bottom: none;
  }

  span.month { 
    background-color: $timebox-month-bg;
    color: $timebox-month-fg;
    padding: ($timebox-width / 10) 0rem;
    border-bottom-right-radius: $timebox-width / 10;
    border-top: none;
  }
}
